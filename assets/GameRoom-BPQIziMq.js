import{j as e,m as s,A as Ve}from"./framer-CXIzzW3M.js";import{c as Le,r as x,e as Qe,d as Fe}from"./vendor-Nm6aTgQn.js";import{u as Ge,s as n}from"./useGamesLocale-CCHFg6iZ.js";import{L as ie,p as Ce,a as Me,b as Ue}from"./index-CYqfJx9j.js";import{e as F,X as ee,S as Oe,R as Be,f as oe,T as We,g as _e,U as Je,h as Ye}from"./ui-CpG443EN.js";function Ke({question:m,type:p,playerAnswer:r,setPlayerAnswer:T,selectedOptions:N,setSelectedOptions:t,ranking:v,setRanking:y,onSubmitAnswer:o,hasSubmitted:$}){var E,G,V;if(p==="text")return e.jsxs(s.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"w-full max-w-2xl",children:[e.jsx("input",{type:"text",value:r,onChange:a=>T(a.target.value),onBlur:()=>o(!1),onKeyDown:a=>{a.key==="Enter"&&o(!1)},placeholder:"Type your answer...",className:"w-full bg-slate-800/50 text-white text-center text-xl border-2 border-slate-700 hover:border-cyan-500/50 focus:border-cyan-500 rounded-xl py-4 px-6 focus:outline-none focus:ring-2 focus:ring-cyan-500/20 transition-all placeholder-slate-500"}),e.jsx("p",{className:"text-sm text-slate-500 text-center mt-3",children:"Press Enter or click away to submit"})]});if(p==="multiple-choice")return e.jsx(s.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"grid grid-cols-1 sm:grid-cols-2 gap-4 w-full max-w-2xl",children:(E=m.options)==null?void 0:E.map((a,I)=>e.jsxs(s.label,{whileHover:{scale:1.05},whileTap:{scale:.95},className:`relative p-5 rounded-xl cursor-pointer transition-all border-2 ${N[0]===a?"border-cyan-500 bg-cyan-500/10":"border-slate-700 bg-slate-800/50 hover:border-cyan-500/50"}`,children:[e.jsx("input",{type:"radio",name:"answer",value:a,checked:N[0]===a,onChange:()=>{t([a]),setTimeout(()=>o(!1),0)},className:"sr-only"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all ${N[0]===a?"border-cyan-400 bg-cyan-400":"border-slate-600"}`,children:N[0]===a&&e.jsx(F,{size:16,className:"text-slate-900"})}),e.jsx("span",{className:"font-bold text-lg text-white",children:a})]})]},I))});if(p==="multiple-answer")return e.jsx(s.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"grid grid-cols-1 sm:grid-cols-2 gap-4 w-full max-w-2xl",children:(G=m.options)==null?void 0:G.map((a,I)=>e.jsxs(s.label,{whileHover:{scale:1.05},whileTap:{scale:.95},className:`relative p-5 rounded-xl cursor-pointer transition-all border-2 ${N.includes(a)?"border-purple-500 bg-purple-500/10":"border-slate-700 bg-slate-800/50 hover:border-purple-500/50"}`,children:[e.jsx("input",{type:"checkbox",checked:N.includes(a),onChange:D=>{D.target.checked?t(_=>{const w=[..._,a];return setTimeout(()=>o(!1),0),w}):t(_=>{const w=_.filter(i=>i!==a);return setTimeout(()=>o(!1),0),w})},className:"sr-only"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-6 h-6 rounded-lg border-2 flex items-center justify-center transition-all ${N.includes(a)?"border-purple-400 bg-purple-400":"border-slate-600"}`,children:N.includes(a)&&e.jsx(F,{size:16,className:"text-slate-900"})}),e.jsx("span",{className:"font-bold text-lg text-white",children:a})]})]},I))});if(p==="image-text")return e.jsxs(s.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"flex flex-col items-center gap-6 w-full",children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 w-full max-w-2xl",children:(V=m.imageUrls)==null?void 0:V.map((a,I)=>e.jsx(s.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:I*.1},className:"relative overflow-hidden rounded-xl aspect-square",children:e.jsx("img",{src:a,alt:`Image ${I+1}`,className:"w-full h-full object-cover blur-sm hover:blur-none transition-all duration-300"})},I))}),e.jsx("input",{type:"text",value:r,onChange:a=>T(a.target.value),onBlur:()=>o(!1),onKeyDown:a=>{a.key==="Enter"&&o(!1)},placeholder:"Type your answer...",className:"w-full max-w-md bg-slate-800/50 text-white text-center text-lg border-2 border-slate-700 hover:border-cyan-500/50 focus:border-cyan-500 rounded-xl py-3 px-4 focus:outline-none focus:ring-2 focus:ring-cyan-500/20 transition-all placeholder-slate-500"})]});if(p==="audio")return e.jsxs(s.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"flex flex-col items-center gap-6 w-full max-w-2xl",children:[e.jsxs("div",{className:"w-full bg-gradient-to-r from-purple-500/20 to-pink-500/20 border border-purple-500/50 rounded-xl p-8 flex flex-col items-center gap-4",children:[e.jsx("div",{className:"text-4xl",children:"ðŸŽµ"}),e.jsxs("audio",{controls:!0,className:"w-full",controlsList:"nodownload",children:[e.jsx("source",{src:m.audioUrl,type:"audio/mpeg"}),"Your browser does not support the audio element."]})]}),m.options?e.jsx("div",{className:"grid grid-cols-2 gap-3 w-full",children:m.options.map((a,I)=>e.jsx(s.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{t([a]),setTimeout(()=>o(!1),0)},className:`py-3 px-4 rounded-lg font-bold transition-all ${N[0]===a?"bg-purple-600 text-white":"bg-slate-700 hover:bg-slate-600 text-white"}`,children:a},I))}):e.jsx("input",{type:"text",value:r,onChange:a=>T(a.target.value),onKeyDown:a=>{a.key==="Enter"&&o(!1)},placeholder:"Type animal name...",className:"w-full bg-slate-800/50 text-white text-center text-lg border-2 border-slate-700 hover:border-cyan-500/50 focus:border-cyan-500 rounded-xl py-3 px-4 focus:outline-none focus:ring-2 focus:ring-cyan-500/20 transition-all placeholder-slate-500"})]});if(p==="ranking"){const[a,I]=Le.useState(null),D=i=>I(i),_=i=>i.preventDefault(),w=i=>{if(a===null||a===i)return;const k=[...v],H=k[a];k.splice(a,1),k.splice(i,0,H),y(k),I(null),o(!1)};return e.jsxs(s.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"w-full max-w-2xl space-y-4",children:[e.jsx("p",{className:"text-sm text-slate-400 text-center",children:"Drag to reorder (1 = first, most important)"}),e.jsx("div",{className:"space-y-3",children:v==null?void 0:v.map((i,k)=>e.jsxs(s.div,{draggable:!0,onDragStart:()=>D(k),onDragOver:_,onDrop:()=>w(k),animate:{opacity:a===k?.6:1},className:"flex items-center gap-3 bg-gradient-to-r from-slate-800/50 to-slate-800/20 p-4 rounded-lg border border-slate-700 cursor-move hover:border-cyan-500/50 transition-all",children:[e.jsx("div",{className:"text-2xl font-bold text-cyan-400 min-w-10",children:k+1}),typeof i=="string"&&i.startsWith("http")?e.jsx("img",{src:i,alt:`Rank ${k+1}`,className:"h-12 w-12 rounded object-cover"}):e.jsx("span",{className:"font-bold text-white flex-1",children:i}),e.jsx("span",{className:"text-xs text-slate-500",children:"â‹®â‹®"})]},k))}),e.jsx(s.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>o(!1),disabled:$,className:`w-full py-3 px-4 rounded-lg font-bold transition-all ${$?"bg-slate-600 text-slate-400 cursor-not-allowed":"bg-gradient-to-r from-cyan-500 to-blue-600 text-white hover:shadow-lg hover:shadow-cyan-500/50"}`,children:"Submit Ranking"})]})}if(p==="lyrics")return e.jsxs(s.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"w-full max-w-2xl space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-500/20 to-pink-500/20 border border-purple-500/50 rounded-xl p-6 italic text-lg text-purple-300 text-center",children:['"',m.question,'"']}),e.jsx("input",{type:"text",value:r,onChange:a=>T(a.target.value),onBlur:()=>o(!1),onKeyDown:a=>{a.key==="Enter"&&o(!1)},placeholder:"Guess the song...",className:"w-full bg-slate-800/50 text-white text-center text-lg border-2 border-slate-700 hover:border-cyan-500/50 focus:border-cyan-500 rounded-xl py-4 px-6 focus:outline-none focus:ring-2 focus:ring-cyan-500/20 transition-all placeholder-slate-500"})]});if(p==="petit-bac"){const[a,I]=x.useState({}),D=m.categories||["Animal","Celebrity","Fruit","Country","Job"];return e.jsxs(s.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"w-full max-w-2xl space-y-4",children:[e.jsx("p",{className:"text-center text-sm text-slate-400",children:"Complete all fields"}),e.jsx("div",{className:"space-y-3",children:D.map((_,w)=>e.jsxs(s.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:w*.1},className:"flex gap-3 items-center",children:[e.jsx("label",{className:"w-24 font-bold text-slate-300",children:_}),e.jsx("input",{type:"text",value:a[_.toLowerCase()]||"",onChange:i=>{const k={...a,[_.toLowerCase()]:i.target.value};I(k),T(JSON.stringify(k))},placeholder:`Enter ${_}...`,className:"flex-1 bg-slate-800/50 text-white border-2 border-slate-700 hover:border-cyan-500/50 focus:border-cyan-500 rounded-lg py-2 px-3 focus:outline-none focus:ring-2 focus:ring-cyan-500/20 transition-all placeholder-slate-500"})]},w))}),e.jsx(s.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>o(!1),disabled:$||Object.keys(a).length<D.length,className:`w-full py-3 px-4 rounded-lg font-bold transition-all ${$||Object.keys(a).length<D.length?"bg-slate-600 text-slate-400 cursor-not-allowed":"bg-gradient-to-r from-purple-500 to-pink-600 text-white hover:shadow-lg hover:shadow-purple-500/50"}`,children:"Submit Answers"})]})}return e.jsxs(s.div,{initial:{opacity:0},animate:{opacity:1},className:"text-slate-400 text-center",children:["Unknown question type: ",p]})}function Xe({type:m,question:p,playerAnswer:r,isCorrect:T}){var N;if(["text","multiple-choice","multiple-answer","lyrics","audio"].includes(m))return e.jsx(s.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-slate-800/50 border border-slate-700 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`mt-1 ${T?"text-green-400":"text-red-400"}`,children:T?e.jsx(F,{size:20}):e.jsx(ee,{size:20})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-slate-400 mb-1",children:"Player's Answer:"}),e.jsx("p",{className:"font-bold text-white text-lg",children:r}),e.jsxs("p",{className:"text-sm text-slate-500 mt-2",children:["Correct Answer: ",p.answer||p.answerFr]})]})]})});if(m==="image-text")return e.jsxs(s.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:(N=p.imageUrls)==null?void 0:N.map((t,v)=>e.jsx(s.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:v*.05},className:"relative overflow-hidden rounded-lg aspect-square",children:e.jsx("img",{src:t,alt:`Image ${v+1}`,className:"w-full h-full object-cover"})},v))}),e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-4 flex items-start gap-3",children:[e.jsx("div",{className:`mt-1 ${T?"text-green-400":"text-red-400"}`,children:T?e.jsx(F,{size:20}):e.jsx(ee,{size:20})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-slate-400 mb-1",children:"Player's Answer:"}),e.jsx("p",{className:"font-bold text-white text-lg",children:r}),e.jsxs("p",{className:"text-sm text-slate-500 mt-2",children:["Correct: ",p.answer||p.answerFr]})]})]})]});if(m==="ranking"){const t=Array.isArray(r)?r:JSON.parse(r||"[]"),v=p.answer||[];return e.jsx(s.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-4 space-y-3",children:[e.jsx("p",{className:"text-sm font-bold text-slate-300",children:"Your Order:"}),t==null?void 0:t.map((y,o)=>e.jsxs(s.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:o*.05},className:"flex items-center gap-2 bg-slate-900/50 p-3 rounded",children:[e.jsx("span",{className:"font-bold text-cyan-400",children:o+1}),typeof y=="string"&&y.startsWith("http")?e.jsx("img",{src:y,alt:`Rank ${o+1}`,className:"h-8 w-8 rounded"}):e.jsx("span",{className:"text-sm text-white",children:y})]},o))]}),e.jsxs("div",{className:"bg-slate-800/50 border border-green-500/30 rounded-lg p-4 space-y-3",children:[e.jsx("p",{className:"text-sm font-bold text-slate-300",children:"Correct Order:"}),v==null?void 0:v.map((y,o)=>e.jsxs(s.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},transition:{delay:o*.05},className:"flex items-center gap-2 bg-green-900/30 p-3 rounded",children:[e.jsx("span",{className:"font-bold text-green-400",children:o+1}),typeof y=="string"&&y.startsWith("http")?e.jsx("img",{src:y,alt:`Correct ${o+1}`,className:"h-8 w-8 rounded"}):e.jsx("span",{className:"text-sm text-white",children:y})]},o))]})]})})}if(m==="petit-bac"){const t=typeof r=="string"?JSON.parse(r):r||{},v=p.answer||{},y=p.categories||Object.keys(v);return e.jsxs(s.div,{initial:{opacity:0},animate:{opacity:1},className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-4 space-y-3",children:[e.jsx("p",{className:"text-sm font-bold text-slate-300",children:"Your Answers:"}),y.map((o,$)=>e.jsxs(s.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},transition:{delay:$*.05},className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-slate-400 w-20",children:[o,":"]}),e.jsx("span",{className:"font-bold text-cyan-300 flex-1",children:t[o.toLowerCase()]||"â€”"})]},$))]}),e.jsxs("div",{className:"bg-slate-800/50 border border-green-500/30 rounded-lg p-4 space-y-3",children:[e.jsx("p",{className:"text-sm font-bold text-slate-300",children:"Correct Answers:"}),y.map((o,$)=>e.jsxs(s.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},transition:{delay:$*.05},className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-slate-400 w-20",children:[o,":"]}),e.jsx("span",{className:"font-bold text-green-300 flex-1",children:v[o.toLowerCase()]||"â€”"})]},$))]})]})}return e.jsxs(s.div,{initial:{opacity:0},animate:{opacity:1},className:"text-slate-400 text-center",children:["Unable to display answer for type: ",m]})}const Ze=({players:m=[],hostId:p,selfId:r,gamePhase:T,partyCode:N,isHost:t,t:v})=>e.jsxs(s.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},className:"relative rounded-xl overflow-hidden",children:[e.jsx("div",{className:"absolute -inset-px bg-gradient-to-br from-purple-500/20 to-cyan-500/20 blur-xl -z-10"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-900 to-slate-950 border border-slate-800 -z-10"}),e.jsxs("div",{className:"relative p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(Je,{size:24,className:"text-cyan-400"}),e.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-cyan-400 to-purple-400 bg-clip-text text-transparent",children:v.players})]}),e.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto custom-scrollbar",children:m.map((y,o)=>e.jsxs(s.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},transition:{delay:o*.05},className:"group flex justify-between items-center bg-gradient-to-r from-slate-800/50 to-slate-800/20 hover:from-slate-800/80 hover:to-slate-800/50 p-3 rounded-lg border border-slate-700/50 transition-all",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-cyan-500 to-purple-500 flex items-center justify-center text-xs font-bold text-white",children:y.name[0]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"font-bold text-white text-sm",children:[y.name,y.id===r&&e.jsx("span",{className:"ml-2 text-cyan-400 text-xs font-bold",children:"YOU"})]}),y.id===p&&e.jsxs("p",{className:"text-xs text-yellow-400 flex items-center gap-1",children:[e.jsx(Ye,{size:12})," Host"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-mono text-lg font-bold text-purple-400",children:y.score||0}),e.jsx("p",{className:"text-xs text-slate-500",children:"pts"})]}),t&&T==="waiting"&&y.id!==p&&e.jsx(s.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>{try{n.emit("kick_player",{partyCode:N,playerId:y.id})}catch($){console.warn("kick emit failed",$)}},className:"p-1.5 rounded-lg bg-red-900/20 hover:bg-red-900/40 text-red-400 hover:text-red-300 transition-all",title:v.kick,children:e.jsx(ee,{size:16})})]})]},y.id))})]})]});function lt(){var he,ge,fe,ye,be,ve;const{partyCode:m}=Qe(),p=Fe(),r=Ge(),T=x.useRef(!0),N=x.useRef(null),[t,v]=x.useState(null),[y,o]=x.useState(!0),[$,E]=x.useState(null),[G,V]=x.useState(null),a=x.useRef(null),[I,D]=x.useState(12),[_,w]=x.useState("waiting"),[i,k]=x.useState(null),[H,te]=x.useState(0),[se,Te]=x.useState(0),[M,B]=x.useState(""),[ae,W]=x.useState([]),[le,re]=x.useState([]),[$e,ce]=x.useState(null),[R,J]=x.useState(0),[P,Y]=x.useState(0),[Ie,K]=x.useState(!1),[Re,X]=x.useState(!1),U=x.useRef(null),Z=x.useRef(null),de=x.useRef(0);x.useEffect(()=>{N.current=t},[t]),x.useEffect(()=>{(i==null?void 0:i.type)==="ranking"&&(i!=null&&i.imageUrls)&&re([...i.imageUrls])},[i,H]),x.useEffect(()=>{B(""),W([]),re([]),K(!1)},[H]),x.useEffect(()=>{const c=l=>{var u,f,C,q,je,we,Ne,ke;if(l!=null&&l.code&&l.code!==m)try{p(`/games/${l.code}`,{replace:!0})}catch(O){console.warn("Failed to update URL on party code change",O)}v(l),o(!1),((u=l.game)==null?void 0:u.currentQuestion)>0&&((f=l.game.questions)==null?void 0:f.length)>0&&l.game.currentQuestion<l.game.questions.length?(w("playing"),te(l.game.currentQuestion)):((C=l.game)==null?void 0:C.currentQuestion)>=((q=l.game.questions)==null?void 0:q.length)&&((je=l.game.questions)==null?void 0:je.length)>0&&l.game.playerAnswers&&!l.game.playerAnswers.every(O=>O.validated)?(w("validation"),_!=="validation"&&(J(0),Y(0))):((we=l.game)==null?void 0:we.currentQuestion)>=((Ne=l.game.questions)==null?void 0:Ne.length)&&((ke=l.game.questions)==null?void 0:ke.length)>0&&l.game.playerAnswers&&l.game.playerAnswers.every(O=>O.validated)&&w("results")},d=()=>{E("Party not found."),o(!1),setTimeout(()=>p("/games"),3e3)},h=({question:l,questionIndex:u,timePerQuestion:f,startTime:C})=>{w("playing"),k(l),te(u||0),B(""),W([]),K(!1),console.log("Game started, question index:",u),Z.current=C||Date.now(),de.current=f,xe(Z.current,f);try{Ce()}catch(q){console.warn("Failed to play switch sound",q)}},b=({question:l,questionIndex:u,timePerQuestion:f,startTime:C})=>{w("playing"),k(l),te(u),B(""),W([]),K(!1),console.log("Next question, index:",u),Z.current=C||Date.now(),de.current=f,xe(Z.current,f);try{Ce()}catch(q){console.warn("Failed to play switch sound",q)}},j=({validationRequired:l})=>{clearInterval(U.current),l?(w("validation"),J(0),Y(0)):w("results");try{Me()}catch(u){console.warn("Failed to play finish sound",u)}},g=({finalScores:l})=>{w("results"),ce(l)},z=({reason:l})=>{E(l||"Party was closed by the host."),o(!1),setTimeout(()=>p("/games"),3e3)},A=()=>{w("waiting"),ce(null),J(0),Y(0)},L=l=>{console.log("Rematch votes:",l.votesReceived,"/",l.totalPlayers)},Q=({partyCode:l})=>{var C,q;const u=N.current,f=(q=(C=u==null?void 0:u.players)==null?void 0:C[0])==null?void 0:q.id;f&&f===n.id&&n.emit("start_game",{partyCode:l,isRematch:!0})};n.on("party_state",c),n.on("kicked",l=>{E((l==null?void 0:l.reason)||"You were removed from the party."),setTimeout(()=>p("/games"),1500)}),n.on("party_not_found",d),n.on("game_started",h),n.on("next_question",b),n.on("game_over",j),n.on("final_game_over",g),n.on("party_closed",z),n.on("rematch_starting",A),n.on("rematch_vote_received",L),n.on("trigger_rematch",Q),n.on("validation_advanced",({questionIndex:l,playerIndex:u})=>{console.log(`Socket: validation_advanced received: Q${l} P${u}`),J(l),Y(u)}),n.on("host_disconnected",({timeoutMs:l,hostDisconnectedAt:u})=>{const f=Math.floor((Date.now()-(u||Date.now()))/1e3),C=Math.max(0,Math.round((l||15e3)/1e3)-f);V(C)}),n.on("host_promoted",({newHostId:l,newHostName:u})=>{console.log("Host promoted to",u),E(`Host promoted to ${u}`),setTimeout(()=>E(null),3e3)}),n.emit("get_party_state",m);const S=setTimeout(()=>{T.current=!1},60);return()=>{if(!T.current)try{n.emit("leave_party",{partyCode:m})}catch(l){console.warn("leave_party emit failed",l)}clearTimeout(S),n.off("party_state",c),n.off("party_not_found",d),n.off("kicked"),n.off("game_started",h),n.off("next_question",b),n.off("game_over",j),n.off("final_game_over",g),n.off("party_closed",z),n.off("rematch_starting",A),n.off("rematch_vote_received",L),n.off("trigger_rematch",Q),n.off("host_disconnected"),n.off("host_promoted"),n.off("validation_advanced"),clearInterval(U.current)}},[m,p]),x.useEffect(()=>{var h;if(!((h=t==null?void 0:t.game)!=null&&h.hostDisconnected)||!t.game.hostDisconnectedAt){V(null);return}const c=()=>{const b=Math.floor((Date.now()-t.game.hostDisconnectedAt)/1e3),j=Math.max(0,15-b);V(j)};c();const d=setInterval(c,1e3);return()=>clearInterval(d)},[(he=t==null?void 0:t.game)==null?void 0:he.hostDisconnectedAt]),x.useEffect(()=>{var c,d,h,b,j,g;_==="validation"&&(console.log(`Validation indices updated: Q${R} P${P}`),console.log("PartyState available?",!!((c=t==null?void 0:t.game)!=null&&c.questions),"Questions:",(h=(d=t==null?void 0:t.game)==null?void 0:d.questions)==null?void 0:h.length),console.log("Players available?",!!((b=t==null?void 0:t.game)!=null&&b.playerAnswers),"Answers:",(g=(j=t==null?void 0:t.game)==null?void 0:j.playerAnswers)==null?void 0:g.length))},[R,P,_]),x.useEffect(()=>{function c(){try{const d=a.current;if(d){const h=d.offsetWidth||0;D(Math.round(h/2)+8)}}catch{}}return c(),window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[t==null?void 0:t.code]);const Pe=async()=>{var d;if(!(!t||!(((d=t.players[0])==null?void 0:d.id)===n.id)))try{n.emit("reset_party_code",{partyCode:t.code},h=>{h&&h.ok?console.log("Party code reset to",h.newCode):console.warn("Could not reset party code",h)})}catch(h){console.error("reset emit failed",h)}},xe=(c,d)=>{clearInterval(U.current);const h=()=>{const b=Date.now()-(c||Date.now()),j=Math.max(0,d*1e3-b),g=Math.max(0,Math.ceil(j/1e3));if(Te(g),j<=0){try{me(!0)}catch(z){console.warn("Auto-submit failed",z)}clearInterval(U.current)}if(g>0&&g<=5)try{Ue()}catch{}};h(),U.current=setInterval(h,1e3)},me=(c=!1)=>{if(!i)return;let d=M;if(i.type==="multiple-choice"||i.type==="multiple-answer"?d=ae:i.type==="ranking"?d=le:i.type==="petit-bac"&&(d=M),!c&&(i.type==="text"&&!M.trim()||(i.type==="multiple-choice"||i.type==="multiple-answer")&&ae.length===0||i.type==="ranking"&&le.length===0||i.type),Ie){console.log("Already submitted for question",H,"skipping");return}console.log("Submitting answer for question",H,":",d),n.emit("submit_answer",{partyCode:m,questionIndex:H,answer:d}),K(!0)},pe=c=>{if(!t||!t.game||!t.game.questions||!t.players)return;const d=t.players[P];d&&n.emit("submit_validation",{partyCode:m,validatedPlayerId:d.id,validatedQuestionIndex:R,isCorrect:c},h=>{console.log("Validation submitted and ack received:",h)})},Ae=()=>{var z;if(!t||!t.game||!t.players||!t.game.questions)return;const c=t.players.length,d=t.game.questions.length,h=t.players[P];if(!h){console.warn("Current player not found at index",P);return}const b=(z=t.game.playerAnswers)==null?void 0:z.find(A=>A.playerId===h.id&&A.questionIndex===R);if(!b){alert(r.pleaseValidateBefore);return}if(!b.validated){alert(r.pleaseValidateBefore);return}let j=R,g=P;if(P<c-1)g=P+1;else if(R<d-1)j=R+1,g=0;else{console.log("All validation complete");return}console.log(`Advancing validation: Q${j} P${g}`),n.emit("advance_validation",{partyCode:m,questionIndex:j,playerIndex:g},A=>{console.log("advance_validation ack:",A)})};if(y)return e.jsx(ie,{});if($)return e.jsxs("div",{className:"text-white min-h-screen bg-gray-900 p-8 flex flex-col items-center justify-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-red-500 mb-4",children:"Error"}),e.jsxs("p",{className:"text-xl",children:[$," Redirecting you to the lobby..."]})]});if(!t)return null;const ue=n.id,ne=((ge=t.players[0])==null?void 0:ge.id)===ue,ze=()=>{var c;switch(_){case"waiting":return e.jsxs(s.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center h-full space-y-8",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(s.div,{animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},className:"text-6xl",children:"ðŸŽ®"}),e.jsx("h2",{className:"text-4xl font-bold bg-gradient-to-r from-cyan-400 via-purple-400 to-pink-400 bg-clip-text text-transparent",children:r.waitingRoom}),e.jsx("p",{className:"text-slate-400 text-lg",children:r.gameWillBeginShortly})]}),ne?e.jsxs(s.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:De,className:"relative overflow-hidden rounded-lg py-4 px-8 text-xl font-bold text-white group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-500 to-blue-600 group-hover:shadow-lg group-hover:shadow-cyan-500/50 transition-all"}),e.jsxs("div",{className:"relative flex items-center gap-2",children:[e.jsx(_e,{size:24}),e.jsx("span",{children:r.startGame})]})]}):e.jsxs(s.div,{animate:{opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0},className:"text-center",children:[e.jsxs("div",{className:"flex items-center gap-2 justify-center text-cyan-400 text-lg font-bold mb-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-cyan-400 animate-pulse"}),r.waitingForHost]}),e.jsx("p",{className:"text-sm text-slate-500",children:"Gathering players..."})]})]});case"playing":if(!i)return e.jsx(ie,{});const{question:d,type:h}=i;return e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"flex flex-col h-full justify-between",children:[e.jsxs("div",{className:"text-center space-y-4 mb-8",children:[e.jsx("div",{className:"flex items-center justify-center gap-3",children:e.jsx("div",{className:"px-4 py-2 bg-gradient-to-r from-purple-500/20 to-pink-500/20 border border-purple-500/50 rounded-lg",children:e.jsxs("p",{className:"text-sm font-bold text-purple-400",children:["Question ",H+1," / ",t.game.questions.length]})})}),e.jsx("h2",{className:"text-3xl md:text-4xl font-bold bg-gradient-to-r from-cyan-400 to-purple-400 bg-clip-text text-transparent",children:d}),e.jsxs(s.div,{animate:{scale:se<=5?[1,1.1,1]:1},transition:{duration:.6,repeat:1/0},className:`inline-flex items-center justify-center w-24 h-24 rounded-full font-extrabold text-4xl mx-auto border-2 ${se<=5?"border-red-500 bg-red-500/10 text-red-400":"border-cyan-500 bg-cyan-500/10 text-cyan-400"}`,children:[se,"s"]})]}),e.jsx("div",{className:"flex-grow flex flex-col justify-center items-center pb-8",children:e.jsx(Ke,{question:i,type:h,playerAnswer:M,setPlayerAnswer:B,selectedOptions:ae,setSelectedOptions:W,ranking:le,setRanking:re,onSubmitAnswer:me,hasSubmitted:!1})})]},H);case"validation":if(!t.game.questions||!t.players||!t.game.playerAnswers)return console.warn("Validation case: Missing required data",{questions:!!t.game.questions,players:!!t.players,playerAnswers:!!t.game.playerAnswers}),e.jsx(ie,{});const b=t.game.questions[R],j=t.players[P];if(console.log(`Rendering validation: Q${R}/${t.game.questions.length} P${P}/${t.players.length}`,{questionExists:!!b,playerExists:!!j}),!j)return e.jsxs(s.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center h-full space-y-4",children:[e.jsx(oe,{size:48,className:"text-red-400"}),e.jsx("h2",{className:"text-3xl font-bold text-red-400",children:r.validationError}),e.jsx("p",{className:"text-slate-400",children:r.noAnswersToValidate})]});const g=t.game.playerAnswers.find(f=>f.playerId===j.id&&f.questionIndex===R);return!b||!g?e.jsxs(s.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center h-full space-y-4",children:[e.jsx(oe,{size:48,className:"text-red-400"}),e.jsx("h2",{className:"text-3xl font-bold text-red-400",children:r.validationError}),e.jsx("p",{className:"text-slate-400",children:r.noAnswersToValidate})]}):ne?e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col h-full justify-between",children:[e.jsxs("div",{className:"text-center space-y-4 mb-8",children:[e.jsx("h2",{className:"text-4xl font-bold bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",children:r.validateAnswers}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(_e,{size:20,className:"text-purple-400"}),e.jsxs("p",{className:"text-slate-400",children:[r.question," ",R+1," / ",t.game.questions.length]})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-slate-800/50 to-slate-800/20 border border-slate-700 rounded-xl p-6 mb-8",children:e.jsx("p",{className:"text-2xl font-bold text-white",children:b.question})}),e.jsxs(s.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},className:"bg-gradient-to-r from-green-900/30 to-emerald-900/30 border border-green-500/50 rounded-xl p-6 mb-6",children:[e.jsxs("p",{className:"text-sm font-bold text-green-400 mb-3",children:["âœ“ ",r.correctAnswer]}),e.jsx("div",{className:"text-green-300 text-lg font-semibold space-y-1",children:Array.isArray(b.answer)?b.answer.map((f,C)=>e.jsxs("div",{children:["â€¢ ",f]},C)):e.jsx("div",{children:b.answer})})]}),e.jsxs(s.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},className:"mb-8",children:[e.jsxs("p",{className:"text-lg font-bold text-white mb-3",children:[j.name,"'s ",r.answer]}),e.jsx(Xe,{type:b.type||"text",question:b,playerAnswer:g.answer,isCorrect:g.isCorrect})]}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsxs(s.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>pe(!0),className:`flex-1 py-4 px-6 rounded-lg font-bold text-lg transition-all flex items-center justify-center gap-2 ${g.validated&&g.isCorrect?"bg-green-600 text-white ring-2 ring-green-400":"bg-gradient-to-r from-green-500 to-emerald-600 hover:shadow-lg hover:shadow-green-500/50 text-white"}`,children:[e.jsx(F,{size:20}),r.correct]}),e.jsxs(s.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>pe(!1),className:`flex-1 py-4 px-6 rounded-lg font-bold text-lg transition-all flex items-center justify-center gap-2 ${g.validated&&!g.isCorrect?"bg-red-600 text-white ring-2 ring-red-400":"bg-gradient-to-r from-red-500 to-pink-600 hover:shadow-lg hover:shadow-red-500/50 text-white"}`,children:[e.jsx(ee,{size:20}),r.incorrect]})]}),e.jsx(s.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Ae,disabled:!g.validated,className:`py-4 px-8 rounded-lg font-bold text-lg transition-all ${g.validated?"bg-gradient-to-r from-purple-500 to-pink-600 hover:shadow-lg hover:shadow-purple-500/50 text-white":"bg-slate-600 text-slate-400 cursor-not-allowed"}`,children:R===t.game.questions.length-1&&P===t.players.length-1?r.finishValidation||"Finish Validation":r.next||"Next"})]}):e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col h-full justify-center items-center space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-4xl font-bold bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent mb-2",children:r.validation}),e.jsx("p",{className:"text-slate-400",children:"Waiting for host to validate answers..."})]}),e.jsxs("div",{className:"bg-gradient-to-r from-slate-800/50 to-slate-800/20 border border-slate-700 rounded-xl p-8 max-w-xl w-full",children:[e.jsx("p",{className:"text-2xl font-bold text-white mb-4",children:b.question}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-green-900/20 border border-green-500/50 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm font-bold text-green-400 mb-2",children:"Correct Answer"}),e.jsx("p",{className:"text-green-300",children:Array.isArray(b.answer)?b.answer.join(", "):b.answer})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-bold text-slate-400 mb-2",children:[j.name,"'s Answer"]}),e.jsx("p",{className:"text-cyan-300",children:Array.isArray(g.answer)?g.answer.join(", "):g.answer})]})]})]})]});case"results":const z=($e||t.players.map(f=>({name:f.name,score:f.score}))).sort((f,C)=>C.score-f.score),[A,L,Q,...S]=z,l=((c=t.game)==null?void 0:c.rematchVotes)||[],u=l.includes(n.id);return e.jsxs(s.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center h-full space-y-8",children:[e.jsxs(s.div,{animate:{scale:[1,1.05,1]},transition:{duration:1,repeat:1/0},className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ†"}),e.jsx("h2",{className:"text-5xl font-bold bg-gradient-to-r from-yellow-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent",children:r.gameOver})]}),e.jsx("div",{className:"w-full max-w-3xl",children:e.jsxs("div",{className:"flex items-end justify-center gap-6 mb-12",children:[L&&e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"flex flex-col items-center",children:[e.jsxs("div",{className:"bg-gradient-to-br from-slate-400 to-slate-600 rounded-xl p-6 w-28 text-center mb-3 border border-slate-300",children:[e.jsx("p",{className:"text-3xl mb-2",children:"ðŸ¥ˆ"}),e.jsx("p",{className:"font-bold text-slate-900 text-sm",children:L.name}),e.jsxs("p",{className:"font-bold text-slate-900 text-lg",children:[L.score,"pts"]})]}),e.jsx("div",{className:"bg-gradient-to-b from-slate-700 to-slate-800 h-24 w-28 flex items-center justify-center font-bold text-3xl text-slate-300 rounded-b-lg border-2 border-t-0 border-slate-700",children:"2"})]}),A&&e.jsxs(s.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:0},className:"flex flex-col items-center -mt-6",children:[e.jsxs(s.div,{animate:{y:[0,-10,0]},transition:{duration:2,repeat:1/0},className:"relative",children:[e.jsx("div",{className:"absolute -inset-2 bg-gradient-to-r from-yellow-400 to-yellow-600 rounded-xl blur opacity-75 animate-pulse"}),e.jsxs("div",{className:"relative bg-gradient-to-br from-yellow-300 to-yellow-500 rounded-xl p-6 w-32 text-center mb-3 border-2 border-yellow-200",children:[e.jsx("p",{className:"text-4xl mb-2",children:"ðŸ¥‡"}),e.jsx("p",{className:"font-bold text-yellow-900 text-sm",children:A.name}),e.jsxs("p",{className:"font-bold text-yellow-900 text-xl",children:[A.score,"pts"]})]})]}),e.jsx("div",{className:"bg-gradient-to-b from-purple-500 to-purple-700 h-32 w-32 flex items-center justify-center font-bold text-4xl text-yellow-300 rounded-b-lg border-2 border-t-0 border-purple-600 shadow-lg shadow-purple-500/50",children:"1"})]}),Q&&e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex flex-col items-center",children:[e.jsxs("div",{className:"bg-gradient-to-br from-orange-400 to-orange-600 rounded-xl p-6 w-28 text-center mb-3 border border-orange-300",children:[e.jsx("p",{className:"text-3xl mb-2",children:"ðŸ¥‰"}),e.jsx("p",{className:"font-bold text-orange-900 text-sm",children:Q.name}),e.jsxs("p",{className:"font-bold text-orange-900 text-lg",children:[Q.score,"pts"]})]}),e.jsx("div",{className:"bg-gradient-to-b from-slate-600 to-slate-800 h-20 w-28 flex items-center justify-center font-bold text-2xl text-slate-300 rounded-b-lg border-2 border-t-0 border-slate-700",children:"3"})]})]})}),S.length>0&&e.jsxs(s.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"w-full max-w-xl",children:[e.jsx("p",{className:"text-slate-400 text-sm mb-4 text-center font-bold uppercase tracking-widest",children:"Other Players"}),e.jsx("div",{className:"space-y-2",children:S.map((f,C)=>e.jsxs("div",{className:"flex justify-between items-center bg-gradient-to-r from-slate-800/50 to-slate-800/20 p-4 rounded-lg border border-slate-700/50 hover:border-slate-600 transition-all",children:[e.jsx("span",{className:"font-bold text-white",children:f.name}),e.jsxs("span",{className:"font-mono font-bold text-cyan-400",children:[f.score," pts"]})]},C))})]}),e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"flex gap-4 mt-8",children:[e.jsxs(s.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>n.emit("submit_rematch_vote",{partyCode:m}),disabled:u,className:`relative overflow-hidden rounded-lg py-4 px-8 font-bold text-lg transition-all flex items-center gap-2 group ${u?"bg-slate-600 text-slate-400 cursor-not-allowed":"text-white"}`,children:[!u&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-500 to-emerald-600 group-hover:shadow-lg group-hover:shadow-green-500/50 transition-all"}),u&&e.jsx("div",{className:"absolute inset-0 bg-slate-600"}),e.jsxs("div",{className:"relative flex items-center gap-2",children:[e.jsx(We,{size:20}),e.jsx("span",{children:u?`${r.rematch} (${l.length}/${t.players.length})`:r.playAgain||"Play Again"})]})]}),e.jsx(s.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>p("/games"),className:"bg-gradient-to-r from-slate-700 to-slate-800 hover:from-slate-600 hover:to-slate-700 text-white font-bold py-4 px-8 rounded-lg text-lg transition-all",children:r.backToLobby})]})]});default:return null}},De=()=>{n.emit("start_game",{partyCode:m})},He=async()=>{try{await navigator.clipboard.writeText(m||(t==null?void 0:t.code)||""),X(!0),setTimeout(()=>X(!1),2e3)}catch(c){console.error("Copy failed",c)}},qe=async()=>{try{const c=`${window.location.origin}/games/${(t==null?void 0:t.code)||m}`;await navigator.clipboard.writeText(c),X(!0),setTimeout(()=>X(!1),2e3)}catch(c){console.error("Copy link failed",c)}},Ee=async()=>{const c=`${window.location.origin}/games/${(t==null?void 0:t.code)||m}`;if(navigator.share)try{await navigator.share({title:"Join my game",url:c})}catch(d){console.warn("Share failed",d)}else await qe()};return e.jsxs("div",{className:"relative w-full overflow-x-hidden bg-gradient-to-br from-slate-950 via-purple-950/30 to-slate-950 text-white min-h-screen p-4 sm:p-8",children:[e.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:[e.jsx(s.div,{animate:{x:[0,50,0],y:[0,50,0]},transition:{duration:8,repeat:1/0,ease:"easeInOut"},className:"absolute top-0 left-1/4 w-96 h-96 bg-purple-500/20 rounded-full blur-3xl"}),e.jsx(s.div,{animate:{x:[0,-50,0],y:[0,-50,0]},transition:{duration:10,repeat:1/0,ease:"easeInOut",delay:1},className:"absolute bottom-0 right-1/4 w-96 h-96 bg-cyan-500/20 rounded-full blur-3xl"})]}),e.jsx(s.header,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"relative z-10 text-center mb-12",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-slate-400 text-sm font-bold uppercase tracking-widest",children:r.partyCode}),e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsxs(s.button,{whileHover:{scale:1.05},whileTap:{scale:.95},ref:a,onClick:He,className:"relative overflow-hidden rounded-xl px-6 py-4 font-mono text-3xl font-bold tracking-widest group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-500/20 to-purple-500/20 hover:from-cyan-500/40 hover:to-purple-500/40 transition-all"}),e.jsx("div",{className:"absolute inset-0 border border-cyan-500/50 rounded-xl"}),e.jsx("span",{className:"relative",children:t.code}),e.jsx(s.div,{initial:{opacity:0},animate:{opacity:Re?1:0},className:"absolute inset-0 bg-green-500/30 rounded-xl flex items-center justify-center",children:e.jsx(F,{size:28})})]}),e.jsx(s.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Ee,className:"p-3 rounded-xl bg-gradient-to-r from-purple-500/20 to-pink-500/20 hover:from-purple-500/40 hover:to-pink-500/40 border border-purple-500/50 hover:border-purple-500/80 transition-all text-purple-400 hover:text-purple-300",title:"Share party link",children:e.jsx(Oe,{size:20})}),((ye=(fe=t.players)==null?void 0:fe[0])==null?void 0:ye.id)===n.id&&e.jsx(s.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Pe,className:"p-3 rounded-xl bg-gradient-to-r from-blue-500/20 to-cyan-500/20 hover:from-blue-500/40 hover:to-cyan-500/40 border border-blue-500/50 hover:border-blue-500/80 transition-all text-blue-400 hover:text-blue-300",title:"Reset party code",children:e.jsx(Be,{size:20})})]})]})}),e.jsx(Ve,{children:((be=t==null?void 0:t.game)==null?void 0:be.hostDisconnected)&&e.jsx(s.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"relative z-10 max-w-6xl mx-auto mb-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-yellow-900/40 to-orange-900/40 border border-yellow-600/60 text-yellow-200 p-4 rounded-xl flex items-center gap-3",children:[e.jsx(oe,{size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:r.hostDisconnected||"Host disconnected"}),e.jsx("p",{className:"text-sm",children:G!==null?`${r.waitingForHost||"Waiting for host"} â€” ${G}s`:r.waitingForHost||"Waiting for host"})]})]})})}),e.jsxs("main",{className:"relative z-10 max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx(s.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},className:"lg:col-span-2",children:e.jsxs("div",{className:"relative rounded-xl overflow-hidden min-h-[500px] flex flex-col justify-between",children:[e.jsx("div",{className:"absolute -inset-px bg-gradient-to-br from-cyan-500/20 via-purple-500/20 to-pink-500/20 blur-xl -z-10"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-900/80 to-slate-950/80 border border-slate-800/50 -z-10"}),e.jsx("div",{className:"relative p-8 flex flex-col h-full justify-between",children:ze()})]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsx(Ze,{players:t.players,hostId:(ve=t.players[0])==null?void 0:ve.id,selfId:ue,gamePhase:_,partyCode:m,isHost:ne,t:r})})]})]})}export{lt as default};
