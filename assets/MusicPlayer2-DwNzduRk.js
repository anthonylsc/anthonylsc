import{j as t}from"./framer-DqtGPIFc.js";import{r as s}from"./vendor-CwERnQvP.js";function z({src:y,startAt:l=253}){const n=s.useRef(null),[c,h]=s.useState(!1),[u,w]=s.useState(.5),[i,m]=s.useState(!1),[b,x]=s.useState(!1),f=y??(typeof import.meta<"u"?"/anthonylsc/":"/")+"music.mp3";s.useEffect(()=>{try{const e=new Audio(f);e.loop=!0,e.preload="auto",e.volume=u,e.muted=i,n.current=e;const r=()=>{try{l!=null&&typeof e.duration=="number"&&l<e.duration&&(e.currentTime=l)}catch{}};return e.readyState>=1?r():e.addEventListener("loadedmetadata",r,{once:!0}),()=>{try{e.pause(),e.src=""}catch{}n.current=null}}catch(e){console.error("MusicPlayer init failed",e)}},[f]);const[d,g]=s.useState(0),[o,j]=s.useState(0);s.useEffect(()=>{const e=n.current;if(!e)return;const r=()=>g(e.currentTime||0),a=()=>j(e.duration||0);return e.addEventListener("timeupdate",r),e.addEventListener("loadedmetadata",a),e.addEventListener("durationchange",a),()=>{try{e.removeEventListener("timeupdate",r)}catch{}try{e.removeEventListener("loadedmetadata",a)}catch{}try{e.removeEventListener("durationchange",a)}catch{}}},[n.current]);const N=async()=>{const e=n.current;if(e)if(c){try{e.pause()}catch{}h(!1)}else try{await e.play(),h(!0)}catch(r){console.error("Play failed",r)}},M=e=>{const r=Number(e.target.value);w(r),n.current&&(n.current.volume=r)},k=()=>{const e=n.current;if(!e)return;const r=!e.muted;try{e.muted=r}catch{}m(r)},S=e=>{const r=Number(e.target.value);if(n.current&&!Number.isNaN(r)){try{n.current.currentTime=r}catch{}g(r)}},v=e=>{if(!e)return"0:00";const r=Math.floor(e/60),a=Math.floor(e%60).toString().padStart(2,"0");return`${r}:${a}`},E=o?Math.min(100,Math.max(0,d/o*100)):0,L=Math.min(100,Math.max(0,i?0:u*100));return t.jsx("div",{className:"fixed left-1/2 transform -translate-x-1/2 bottom-6 z-50 w-[92%] max-w-3xl",children:t.jsxs("div",{className:"music-card flex items-center gap-4 px-4 py-3 rounded-3xl bg-white/6 backdrop-blur-xl border border-white/10 shadow-lg text-white relative transition-all duration-300",children:[t.jsx("button",{onClick:N,className:"player-play-btn w-14 h-14 rounded-full flex items-center justify-center text-2xl bg-gradient-to-br from-purple-600 to-violet-500 shadow-md",children:c?t.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:[t.jsx("rect",{x:"5",y:"4",width:"4",height:"16",fill:"white",rx:"1"}),t.jsx("rect",{x:"15",y:"4",width:"4",height:"16",fill:"white",rx:"1"})]}):t.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:t.jsx("path",{d:"M5 3v18l15-9L5 3z",fill:"white"})})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"truncate",children:[t.jsx("div",{className:"text-sm font-semibold",children:"Musique"}),t.jsx("div",{className:"text-xs text-gray-300",children:c?"En cours":"En pause"})]}),t.jsxs("div",{className:"text-xs text-gray-300",children:[v(d)," / ",v(o)]})]}),t.jsx("input",{type:"range",min:0,max:o||0,step:.1,value:d,onChange:S,className:"player-range",style:{background:"linear-gradient(90deg, rgba(147,51,234,0.95) 0%, rgba(99,102,241,0.95) 100%)",backgroundSize:`${E}% 100%`,backgroundRepeat:"no-repeat"}})]}),t.jsx("div",{className:"relative flex-shrink-0",onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),children:t.jsxs("div",{className:"relative flex items-center",children:[t.jsx("button",{onClick:k,className:"w-10 h-10 rounded-full flex items-center justify-center bg-white/3 hover:bg-white/5 transition-colors z-20",children:i?t.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:[t.jsx("path",{d:"M16 7v10a1 1 0 0 1-1.6.8L11 15H8a1 1 0 0 1-1-1V10a1 1 0 0 1 1-1h3l3.4-3.8A1 1 0 0 1 16 7z",fill:"white"}),t.jsx("path",{d:"M19 5l-2 2m0 10 2 2",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}):t.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:t.jsx("path",{d:"M5 9v6h4l5 4V5L9 9H5z",fill:"white"})})}),t.jsx("div",{className:`absolute top-1/2 left-full ml-3 transform -translate-y-1/2 w-40 transition-all duration-300 ${b?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,children:t.jsx("input",{type:"range",min:0,max:1,step:.01,value:i?0:u,onChange:e=>{M(e),m(!1)},className:"player-range-mini",style:{background:"linear-gradient(90deg, rgba(147,51,234,0.95) 0%, rgba(99,102,241,0.95) 100%)",backgroundSize:`${L}% 100%`,backgroundRepeat:"no-repeat"}})})]})})]})})}export{z as default};
